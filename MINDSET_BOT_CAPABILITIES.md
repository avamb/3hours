# Возможности сервиса Mindset Happy Bot

Этот документ описывает функциональные возможности, архитектуру и административные инструменты бота Mindset Happy Bot. Документ предназначен для разработки маркетинговой стратегии и понимания ценности продукта для пользователя.

## 1. Что такое Mindset Happy Bot?

Mindset Happy Bot — это персональный AI-коуч и дневник радости в Telegram. Его главная цель — помогать пользователю фокусироваться на позитивных моментах жизни (практика благодарности) и предоставлять психологическую поддержку через диалог с искусственным интеллектом.

### Ценность для пользователя
*   **Формирование привычки:** Регулярные напоминания помогают замечать хорошее.
*   **Эмоциональная поддержка:** Бот доступен 24/7 для безоценочного общения.
*   **Память:** Бот запоминает важные факты о пользователе, создавая ощущение глубокого контакта.
*   **Приватность:** Полный контроль над своими данными.

---

## 2. Функционал для пользователя

### Основной цикл (Moments)
*   **Сбор моментов:** Бот периодически (по настраиваемому графику) спрашивает: «Что хорошего произошло?».
*   **Мультиформатность:** Пользователь может отвечать текстом или голосовым сообщением.
*   **Сохранение:** Ответы сохраняются в личный «Дневник моментов».
*   **Напоминания:** В моменты грусти или по запросу бот может напомнить о прошлых радостных событиях.

### Режим диалога (Dialog Mode / Talk)
*   **Свободное общение:** Команда `/talk` переключает бота в режим эмпатичного собеседника.
*   **Контекстная память:** Бот использует базу знаний (психологические техники) и «память» о пользователе для построения ответов.
*   **Поддержка языков:** Бот автоматически определяет язык пользователя (Русский, Английский, Украинский и др.) и отвечает на нем.

### Персонализация и настройки
Пользователь может гибко настроить бота под себя (команда `/settings`):
*   **Время активности:** Установка интервала (например, с 9:00 до 21:00), чтобы бот не беспокоил ночью.
*   **Частота уведомлений:** Как часто спрашивать о хорошем (например, каждые 3 часа).
*   **Часовой пояс:** Корректная работа уведомлений в любой точке мира.
*   **Обращение:** Выбор стиля общения — формальное («Вы») или неформальное («Ты»).

### Статистика и Геймификация
*   **Стрики (Series):** Подсчет количества дней подряд, когда пользователь записывал моменты.
*   **Статистика:** Общее количество моментов, процент ответов.

---

## 3. Управление данными и Приватность

### Хранение данных
*   **База данных:** Все данные хранятся в защищенной базе данных PostgreSQL.
*   **Векторный поиск:** Тексты моментов и факты из биографии пользователя преобразуются в цифровые векторы (embeddings). Это позволяет боту находить информацию по смыслу, а не только по ключевым словам.

### Редактирование и Удаление
*   **Экспорт (GDPR):** Команда `/export_data` позволяет пользователю получить все накопленные о нем данные в формате JSON-файла.
*   **Удаление (GDPR):** Команда `/delete_data` запускает процесс полного удаления профиля, истории переписки и сохраненных моментов. Это действие необратимо.

### Система Памяти (Memories)
Бот обладает «долгосрочной памятью». Из диалогов он автоматически извлекает и сохраняет:
*   Факты о жизни пользователя.
*   Имена близких людей.
*   Предпочтения и планы.
*   Важные события.
*   *Важно:* Память строго изолирована — бот никогда не смешивает данные разных пользователей.

---

## 4. База знаний (Knowledge Base)

База знаний — это «мозг» бота, содержащий психологические техники, статьи и шаблоны ответов.

### Как она организована?
*   **Структура:** Данные хранятся в виде статей с заголовками и текстом.
*   **Индексация:** Тексты автоматически разбиваются на смысловые фрагменты (чанки) по ~1200 символов.
*   **Семантический поиск:** Когда пользователь задает вопрос, бот ищет в базе знаний наиболее релевантные фрагменты по смыслу и использует их для формирования ответа.

### Как пополняется?
*   Администратор загружает новые материалы через специальный скрипт или интерфейс.
*   Система автоматически индексирует новые материалы, создавая векторные представления для поиска.

---

## 5. Возможности Администратора

Административная панель позволяет управлять поведением бота и взаимодействовать с аудиторией без изменения кода.

### Управление промптами (Prompt Management)
Промпты — это инструкции, которые задают характер и поведение AI.
*   **Версионность:** Каждая инструкция (например, «Системный промпт диалога» или «Правила языка») имеет историю версий.
*   **Безопасное редактирование:** Администратор может создать новую версию промпта, протестировать её и активировать.
*   **Откат изменений:** Если новая версия работает плохо, можно мгновенно вернуться к предыдущей.
*   **Разделение логики:** Отдельные промпты для разных задач (основной диалог, извлечение фактов, языковые правила).

### Маркетинговые рассылки (Campaigns)
Администратор может создавать рассылки сообщений пользователям:
*   **Таргетинг:** Возможность отправлять сообщения всем пользователям или определенным группам (сегментация пока на базовом уровне, но архитектура готова к расширению, например, по полу или активности).
*   **Анализ активности:** Использование триггеров активности для своевременной коммуникации.

### Обратная связь
*   Сбор и просмотр отзывов пользователей через команду `/feedback`.

---

## 6. Архитектура проекта (High-Level)

*   **Платформа:** Telegram Bot API.
*   **Backend:** Python (Aiogram) — обеспечивает быструю работу и асинхронную обработку тысяч сообщений.
*   **Database:** PostgreSQL + pgvector — надежное хранение данных и быстрый «умный» поиск.
*   **AI Engine:** Интеграция с LLM (Language Learning Models) для генерации ответов и анализа текста.
*   **Admin Panel:** Веб-интерфейс (Node.js/React) для управления контентом и настройками.
