<project_specification>
  <project_name>MINDSETHAPPYBOT</project_name>

  <overview>
    Telegram-–±–æ—Ç –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –ø–æ–∑–∏—Ç–∏–≤–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è. –ö–∞–∂–¥—ã–µ 3 —á–∞—Å–∞ (–≤ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Å—ã) —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "–ß—Ç–æ —Ö–æ—Ä–æ—à–µ–≥–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?", —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç—ã –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≥—Ä—É—Å—Ç–Ω–æ, –±–æ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ –ø—Ä–æ—à–ª—ã—Ö —Ä–∞–¥–æ—Å—Ç–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–∞—Ö –∏–∑ –µ–≥–æ –∏—Å—Ç–æ—Ä–∏–∏. MVP –¥–ª—è B2C –∞—É–¥–∏—Ç–æ—Ä–∏–∏, –≤–∫–ª—é—á–∞—è –≤–æ–∑—Ä–∞—Å—Ç–Ω—É—é –≥—Ä—É–ø–ø—É 45+, —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç—ã–º –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.
  </overview>

  <technology_stack>
    <backend>
      <language>Python 3.11+</language>
      <framework>aiogram 3.x</framework>
      <database>PostgreSQL 15+ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º pgvector</database>
      <orm>SQLAlchemy 2.x + asyncpg</orm>
      <task_scheduler>APScheduler –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</task_scheduler>
    </backend>
    <ai_services>
      <llm>OpenAI GPT-4 API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏</llm>
      <embeddings>OpenAI text-embedding-3-small –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤</embeddings>
      <speech_to_text>OpenAI Whisper API –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π</speech_to_text>
    </ai_services>
    <infrastructure>
      <containerization>Docker + Docker Compose</containerization>
      <environment>python-dotenv –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</environment>
    </infrastructure>
  </technology_stack>

  <prerequisites>
    <environment_setup>
      - Python 3.11 –∏–ª–∏ –≤—ã—à–µ
      - PostgreSQL 15+ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º pgvector
      - Telegram Bot Token (–æ—Ç @BotFather)
      - OpenAI API Key
      - Docker –∏ Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    </environment_setup>
  </prerequisites>

  <feature_count>104</feature_count>

  <security_and_access_control>
    <user_roles>
      <role name="user">
        <description>–û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ—Ç–∞</description>
        <permissions>
          - –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –±–æ—Ç–∞ (—Ç–µ–∫—Å—Ç –∏ –≥–æ–ª–æ—Å)
          - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ—é –∏—Å—Ç–æ—Ä–∏—é –º–æ–º–µ–Ω—Ç–æ–≤
          - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
          - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Å—ã –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª
          - –í—ã–±–∏—Ä–∞—Ç—å —Ñ–æ—Ä–º—É –æ–±—Ä–∞—â–µ–Ω–∏—è (—Ç—ã/–≤—ã)
          - –í–µ—Å—Ç–∏ —Å–≤–æ–±–æ–¥–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º
          - –£–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ (GDPR)
          - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ (GDPR)
        </permissions>
      </role>
    </user_roles>
    <authentication>
      <method>Telegram OAuth (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram)</method>
      <session_timeout>–ë–µ—Å—Å—Ä–æ—á–Ω–∞—è —Å–µ—Å—Å–∏—è (—Å–≤—è–∑–∞–Ω–∞ —Å Telegram user_id)</session_timeout>
    </authentication>
    <data_privacy>
      <gdpr_compliance>–ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ GDPR –∏ CCPA</gdpr_compliance>
      <data_usage>–î–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∏–∞–ª–æ–≥–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</data_usage>
      <data_deletion>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç</data_deletion>
      <data_export>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ</data_export>
      <transparency>–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö</transparency>
    </data_privacy>
  </security_and_access_control>

  <core_features>
    <onboarding>
      - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
      - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
      - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –í—ã–±–æ—Ä —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—â–µ–Ω–∏—è "—Ç—ã" –∏–ª–∏ "–≤—ã" (–¥–ª—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã—Ö)
      - –¢—ë–ø–ª–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ —è–∑—ã–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª–∏—Ç–∏–∫–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
      - –ö—Ä–∞—Ç–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ—Ç
      - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ä–∞–∑—É –Ω–∞—á–∞—Ç—å –±–µ–∑ –ª–∏—à–Ω–∏—Ö —à–∞–≥–æ–≤
    </onboarding>

    <main_question_cycle>
      - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–∞ "–ß—Ç–æ —Ö–æ—Ä–æ—à–µ–≥–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?" –∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª)
      - –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ (–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –ø–æ–¥—Ä—è–¥)
      - –í–æ–ø—Ä–æ—Å—ã —Ç–æ–ª—å–∫–æ –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –ü—Ä–∏—ë–º —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
      - –ü—Ä–∏—ë–º –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º
      - –ü–æ–∑–∏—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –Ω–∞ –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç
      - –ú—è–≥–∫–∏–µ —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (–Ω–µ–Ω–∞–≤—è–∑—á–∏–≤–æ)
      - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
      - –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
      - –ú—è–≥–∫–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–ø—É—Å—Ç–∏–ª –≤–æ–ø—Ä–æ—Å
      - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ª–µ–∫—Å–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    </main_question_cycle>

    <voice_messages>
      - –ü—Ä–∏—ë–º –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ Whisper API
      - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≥–æ–ª–æ—Å–∞ –≤ —Ç–µ–∫—Å—Ç
      - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ –±–∞–∑—É
      - –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
      - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á—Ç–æ –≥–æ–ª–æ—Å —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω
    </voice_messages>

    <smart_personalization>
      - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è ("–Ω–∏—á–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ")
      - –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø—Ä–æ—à–ª—ã—Ö —Ä–∞–¥–æ—Å—Ç–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤
      - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø—Ä–æ—à–ª—ã—Ö —Ä–∞–¥–æ—Å—Ç—è—Ö –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ç–µ–∫—É—â–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏
      - –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ç–æ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–¥ –ª–µ–∫—Å–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –£—á—ë—Ç —á–∞—Å—Ç—ã—Ö —Ç–µ–º —Ä–∞–¥–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
      - –ö–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
      - –ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ –æ—Ç–≤–µ—Ç–∞–º
      - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–¥–±–æ—Ä —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
      - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ GPT-4
    </smart_personalization>

    <history_view>
      - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø—Ä–æ—à–ª—ã—Ö —Ö–æ—Ä–æ—à–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤
      - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥—É (—Å–µ–≥–æ–¥–Ω—è, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü, –≤—Å—ë –≤—Ä–µ–º—è)
      - –ü–æ–∏—Å–∫ –ø–æ —Å–≤–æ–∏–º –º–æ–º–µ–Ω—Ç–∞–º
      - –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –¥–∞—Ç–∞–º–∏
      - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç
      - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–µ–º–∞–º/–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
      - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤
      - –•—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
      - –ö–Ω–æ–ø–∫–∞ "–°–ª—É—á–∞–π–Ω—ã–π —Ö–æ—Ä–æ—à–∏–π –º–æ–º–µ–Ω—Ç"
      - –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ (GDPR)
    </history_view>

    <statistics>
      - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤
      - –°—Ç—Ä–∏–∫ (–¥–Ω–∏ –ø–æ–¥—Ä—è–¥ —Å –æ—Ç–≤–µ—Ç–∞–º–∏)
      - –°–∞–º—ã–π –¥–ª–∏–Ω–Ω—ã–π —Å—Ç—Ä–∏–∫
      - –û–±–ª–∞–∫–æ —á–∞—Å—Ç—ã—Ö —Ç–µ–º —Ä–∞–¥–æ—Å—Ç–∏
      - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é/–º–µ—Å—è—Ü
      - –ú–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–µ–π
      - –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      - –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
      - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
      - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    </statistics>

    <free_dialog>
      - –ö–Ω–æ–ø–∫–∞ "–ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
      - –°–≤–æ–±–æ–¥–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å –±–æ—Ç–æ–º –≤–Ω–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
      - –ë–æ—Ç –¥–∞—ë—Ç —Å–æ–≤–µ—Ç—ã –∫–∞–∫ "–≤–∑–≥–ª—è–¥ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã"
      - –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ —á—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
      - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –∏ —ç–º–ø–∞—Ç–∏—á–Ω—ã–π —Ç–æ–Ω
      - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –æ–±—ã—á–Ω–æ–º—É —Ä–µ–∂–∏–º—É
      - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
    </free_dialog>

    <settings>
      - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Å–æ–≤ (–Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü)
      - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏
      - –í—ã–±–æ—Ä —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—â–µ–Ω–∏—è (—Ç—ã/–≤—ã)
      - –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
      - –í—ã–±–æ—Ä —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
      - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é
      - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–æ–ª–æ—Å–æ–º
      - –°–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      - –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
      - –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    </settings>

    <inactive_user_engagement>
      - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (1 –¥–µ–Ω—å, 2-3 –¥–Ω—è, –Ω–µ–¥–µ–ª—è)
      - –†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
      - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏
      - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø—Ä–æ—à–ª—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤
      - –ú—è–≥–∫–∏–π –∏ –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤—ã–π —Ç–æ–Ω
      - –£—á—ë—Ç –ª–µ–∫—Å–∏–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
      - –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    </inactive_user_engagement>

    <gdpr_compliance>
      - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
      - –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
      - –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö
      - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
      - –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
      - –£–¥–∞–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
      - –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª
      - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ü–µ–ª–µ–π
    </gdpr_compliance>

    <menu_and_navigation>
      - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏: "üìñ –ú–æ–∏ –º–æ–º–µ–Ω—Ç—ã", "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏", "üí¨ –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å"
      - –ë—ã—Å—Ç—Ä—ã–µ inline-–∫–Ω–æ–ø–∫–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
      - –ö–æ–º–∞–Ω–¥–∞ /start –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
      - –ö–æ–º–∞–Ω–¥–∞ /help –¥–ª—è –ø–æ–º–æ—â–∏
      - –ö–æ–º–∞–Ω–¥–∞ /settings –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
      - –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞–∑–∞–¥
    </menu_and_navigation>

    <error_handling>
      - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫ —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
      - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ OpenAI API
      - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ Whisper (–Ω–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å)
      - Graceful degradation –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
      - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
      - –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
      - –î—Ä—É–∂–µ–ª—é–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
      - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Å–±–æ—è—Ö
    </error_handling>
  </core_features>

  <database_schema>
    <tables>
      <users>
        - id (SERIAL PRIMARY KEY)
        - telegram_id (BIGINT UNIQUE NOT NULL)
        - username (VARCHAR)
        - first_name (VARCHAR)
        - language_code (VARCHAR DEFAULT 'ru')
        - formal_address (BOOLEAN DEFAULT false) -- true = "–≤—ã", false = "—Ç—ã"
        - active_hours_start (TIME DEFAULT '09:00')
        - active_hours_end (TIME DEFAULT '21:00')
        - notification_interval_hours (INTEGER DEFAULT 3)
        - notifications_enabled (BOOLEAN DEFAULT true)
        - timezone (VARCHAR DEFAULT 'UTC')
        - created_at (TIMESTAMP DEFAULT NOW())
        - updated_at (TIMESTAMP DEFAULT NOW())
        - last_active_at (TIMESTAMP)
        - onboarding_completed (BOOLEAN DEFAULT false)
      </users>

      <moments>
        - id (SERIAL PRIMARY KEY)
        - user_id (INTEGER REFERENCES users(id) ON DELETE CASCADE)
        - content (TEXT NOT NULL)
        - source_type (VARCHAR) -- 'text' –∏–ª–∏ 'voice'
        - original_voice_file_id (VARCHAR) -- Telegram file_id –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö
        - embedding (VECTOR(1536)) -- –¥–ª—è pgvector
        - mood_score (FLOAT) -- –æ—Ü–µ–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –æ—Ç -1 –¥–æ 1
        - topics (TEXT[]) -- –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ —Ç–µ–º—ã
        - created_at (TIMESTAMP DEFAULT NOW())
      </moments>

      <conversations>
        - id (SERIAL PRIMARY KEY)
        - user_id (INTEGER REFERENCES users(id) ON DELETE CASCADE)
        - message_type (VARCHAR) -- 'bot_question', 'user_response', 'free_dialog', 'bot_reply'
        - content (TEXT NOT NULL)
        - metadata (JSONB) -- –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        - created_at (TIMESTAMP DEFAULT NOW())
      </conversations>

      <user_stats>
        - id (SERIAL PRIMARY KEY)
        - user_id (INTEGER REFERENCES users(id) ON DELETE CASCADE)
        - current_streak (INTEGER DEFAULT 0)
        - longest_streak (INTEGER DEFAULT 0)
        - total_moments (INTEGER DEFAULT 0)
        - total_questions_sent (INTEGER DEFAULT 0)
        - total_questions_answered (INTEGER DEFAULT 0)
        - last_response_date (DATE)
        - updated_at (TIMESTAMP DEFAULT NOW())
      </user_stats>

      <scheduled_notifications>
        - id (SERIAL PRIMARY KEY)
        - user_id (INTEGER REFERENCES users(id) ON DELETE CASCADE)
        - scheduled_time (TIMESTAMP NOT NULL)
        - sent (BOOLEAN DEFAULT false)
        - sent_at (TIMESTAMP)
        - question_template_id (INTEGER)
        - created_at (TIMESTAMP DEFAULT NOW())
      </scheduled_notifications>

      <question_templates>
        - id (SERIAL PRIMARY KEY)
        - language_code (VARCHAR NOT NULL)
        - formal (BOOLEAN NOT NULL) -- –¥–ª—è "–≤—ã" –∏–ª–∏ "—Ç—ã"
        - template_text (TEXT NOT NULL)
        - category (VARCHAR) -- 'main', 'follow_up', 'return_inactive'
        - created_at (TIMESTAMP DEFAULT NOW())
      </question_templates>
    </tables>

    <indexes>
      - CREATE INDEX idx_moments_user_id ON moments(user_id)
      - CREATE INDEX idx_moments_created_at ON moments(created_at)
      - CREATE INDEX idx_moments_embedding ON moments USING ivfflat (embedding vector_cosine_ops)
      - CREATE INDEX idx_conversations_user_id ON conversations(user_id)
      - CREATE INDEX idx_scheduled_notifications_time ON scheduled_notifications(scheduled_time, sent)
    </indexes>
  </database_schema>

  <api_endpoints_summary>
    <note>–≠—Ç–æ Telegram –±–æ—Ç, –ø–æ—ç—Ç–æ–º—É –≤–º–µ—Å—Ç–æ HTTP API –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Telegram handlers</note>

    <telegram_handlers>
      <commands>
        - /start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞, –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
        - /help - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
        - /settings - –û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
        - /moments - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –º–æ–º–µ–Ω—Ç–æ–≤
        - /stats - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        - /talk - –ù–∞—á–∞—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–π –¥–∏–∞–ª–æ–≥
        - /delete_data - –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
        - /export_data - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
        - /privacy - –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
      </commands>

      <message_handlers>
        - –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ —Å–≤–æ–±–æ–¥–Ω—ã–π –¥–∏–∞–ª–æ–≥)
        - –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
      </message_handlers>

      <callback_handlers>
        - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ–Ω—é
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Å–æ–≤
        - –í—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
        - –í—ã–±–æ—Ä —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—â–µ–Ω–∏—è
        - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏
        - –§–∏–ª—å—Ç—Ä—ã –ø–æ –ø–µ—Ä–∏–æ–¥—É
      </callback_handlers>
    </telegram_handlers>

    <internal_services>
      - NotificationScheduler - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
      - VectorSearchService - –ø–æ–∏—Å–∫ –ø–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ
      - PersonalizationService - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
      - SpeechToTextService - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –≥–æ–ª–æ—Å–∞
      - StatsService - –ø–æ–¥—Å—á—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
      - GDPRService - —ç–∫—Å–ø–æ—Ä—Ç –∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    </internal_services>
  </api_endpoints_summary>

  <ui_layout>
    <main_structure>
      Telegram –±–æ—Ç —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏ –∏ reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π. –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø–æ–Ω—è—Ç–Ω—ã–π –¥–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏ 45+.
    </main_structure>

    <main_menu_keyboard>
      –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏:
      [üìñ –ú–æ–∏ –º–æ–º–µ–Ω—Ç—ã] [üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞]
      [‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏] [üí¨ –ü–æ–≥–æ–≤–æ—Ä–∏—Ç—å]
    </main_menu_keyboard>

    <message_patterns>
      <question_message>
        –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ + inline-–∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
      </question_message>

      <response_confirmation>
        –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π –æ—Ç–≤–µ—Ç –±–æ—Ç–∞ + inline-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
      </response_confirmation>

      <history_view>
        –°–ø–∏—Å–æ–∫ –º–æ–º–µ–Ω—Ç–æ–≤ —Å –¥–∞—Ç–∞–º–∏ + inline-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
      </history_view>

      <settings_menu>
        Inline-–∫–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å —Ç–µ–∫—É—â–∏–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
      </settings_menu>

      <statistics_view>
        –ö—Ä–∞—Å–∏–≤–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏ —ç–º–æ–¥–∑–∏
      </statistics_view>
    </message_patterns>
  </ui_layout>

  <design_system>
    <tone_of_voice>
      - –¢—ë–ø–ª—ã–π –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π
      - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π, –Ω–æ –Ω–µ –Ω–∞–≤—è–∑—á–∏–≤—ã–π
      - –≠–º–ø–∞—Ç–∏—á–Ω—ã–π
      - –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–º–æ–¥–∑–∏ –¥–ª—è –ø–æ–∑–∏—Ç–∏–≤–∞
      - –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ –ª–µ–∫—Å–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    </tone_of_voice>

    <emoji_usage>
      - üåü - –¥–ª—è –ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤
      - üìñ - –∏—Å—Ç–æ—Ä–∏—è/–º–æ–º–µ–Ω—Ç—ã
      - üìä - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
      - ‚öôÔ∏è - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
      - üí¨ - –¥–∏–∞–ª–æ–≥
      - üî• - —Å—Ç—Ä–∏–∫–∏
      - üíù - –ø–æ–¥–¥–µ—Ä–∂–∫–∞
      - ‚ú® - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    </emoji_usage>

    <message_formatting>
      - –ö–æ—Ä–æ—Ç–∫–∏–µ –∞–±–∑–∞—Ü—ã
      - –ß—ë—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
      - –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–π
      - –ö—Ä—É–ø–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
    </message_formatting>
  </design_system>

  <implementation_steps>
    <step number="1">
      <title>–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞</title>
      <tasks>
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ Python —Å poetry/pip
        - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –∏ docker-compose
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL —Å pgvector
        - –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
        - –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π SQLAlchemy
        - –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
      </tasks>
    </step>

    <step number="2">
      <title>Telegram –±–æ—Ç - –æ—Å–Ω–æ–≤–∞</title>
      <tasks>
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ aiogram –±–æ—Ç–∞
        - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥
        - –ë–∞–∑–æ–≤—ã–µ handlers (/start, /help)
        - –°–∏—Å—Ç–µ–º–∞ reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        - –°–∏—Å—Ç–µ–º–∞ inline-–∫–Ω–æ–ø–æ–∫
        - Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
      </tasks>
    </step>

    <step number="3">
      <title>–û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</title>
      <tasks>
        - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π
        - –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∏ –∏–º–µ–Ω–∏
        - –í—ã–±–æ—Ä —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—â–µ–Ω–∏—è (—Ç—ã/–≤—ã)
        - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
        - –ü–æ–∫–∞–∑ –ø–æ–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
        - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
      </tasks>
    </step>

    <step number="4">
      <title>–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –≤–æ–ø—Ä–æ—Å–æ–≤</title>
      <tasks>
        - –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤
        - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (APScheduler)
        - –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Å—ã
        - –ü—Ä–∏—ë–º —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –≤ –ë–î
        - –ë–∞–∑–æ–≤–∞—è –ø–æ–∑–∏—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
      </tasks>
    </step>

    <step number="5">
      <title>–ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</title>
      <tasks>
        - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Whisper API
        - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö
        - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
        - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ –ë–î
        - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
      </tasks>
    </step>

    <step number="6">
      <title>–í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</title>
      <tasks>
        - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è OpenAI Embeddings API
        - –°–æ–∑–¥–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pgvector –¥–ª—è –ø–æ–∏—Å–∫–∞
        - –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –º–æ–º–µ–Ω—Ç–æ–≤
        - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
        - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø—Ä–æ—à–ª—ã—Ö —Ä–∞–¥–æ—Å—Ç—è—Ö
      </tasks>
    </step>

    <step number="7">
      <title>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã</title>
      <tasks>
        - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è GPT-4 API
        - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –ª–µ–∫—Å–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        - –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫
        - –ú—è–≥–∫–∏–µ —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
      </tasks>
    </step>

    <step number="8">
      <title>–ò—Å—Ç–æ—Ä–∏—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</title>
      <tasks>
        - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –º–æ–º–µ–Ω—Ç–æ–≤
        - –§–∏–ª—å—Ç—Ä—ã –ø–æ –ø–µ—Ä–∏–æ–¥—É
        - –ü–æ–∏—Å–∫ –ø–æ –º–æ–º–µ–Ω—Ç–∞–º
        - –ü–æ–¥—Å—á—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        - –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–∫–æ–≤
        - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
      </tasks>
    </step>

    <step number="9">
      <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</title>
      <tasks>
        - –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Å–æ–≤
        - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
        - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –æ–±—Ä–∞—â–µ–Ω–∏—è
        - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞
        - –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
      </tasks>
    </step>

    <step number="10">
      <title>–°–≤–æ–±–æ–¥–Ω—ã–π –¥–∏–∞–ª–æ–≥</title>
      <tasks>
        - –†–µ–∂–∏–º —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
        - –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å GPT-4
        - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        - –°–æ–≤–µ—Ç—ã –∫–∞–∫ "–≤–∑–≥–ª—è–¥ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã"
        - –í—ã—Ö–æ–¥ –∏–∑ —Ä–µ–∂–∏–º–∞ –¥–∏–∞–ª–æ–≥–∞
      </tasks>
    </step>

    <step number="11">
      <title>–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö</title>
      <tasks>
        - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
        - –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
        - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        - –ù–µ–Ω–∞–≤—è–∑—á–∏–≤—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
      </tasks>
    </step>

    <step number="12">
      <title>GDPR –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è</title>
      <tasks>
        - –ö–æ–º–∞–Ω–¥–∞ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        - –ü–æ–ª–∏—Ä–æ–≤–∫–∞ UX
        - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
        - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
        - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é
      </tasks>
    </step>
  </implementation_steps>

  <success_criteria>
    <functionality>
      - –ë–æ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞ –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ —á–∞—Å—ã
      - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ—Ç–≤–µ—á–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–º –∏ –≥–æ–ª–æ—Å–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
      - –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
      - –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
      - –ë–æ—Ç —É–º–µ–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞—Ç—å –æ –ø—Ä–æ—à–ª—ã—Ö —Ä–∞–¥–æ—Å—Ç–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–∞—Ö –ø—Ä–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–º –Ω–∞—Å—Ç—Ä–æ–µ
      - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
      - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
      - GDPR —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç (—É–¥–∞–ª–µ–Ω–∏–µ, —ç–∫—Å–ø–æ—Ä—Ç)
    </functionality>

    <user_experience>
      - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–Ω—è—Ç–µ–Ω –¥–ª—è –∞—É–¥–∏—Ç–æ—Ä–∏–∏ 45+
      - –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –∑–∞–Ω–∏–º–∞–µ—Ç –º–µ–Ω–µ–µ 1 –º–∏–Ω—É—Ç—ã
      - –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞
      - –°–æ–æ–±—â–µ–Ω–∏—è –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ
      - –ë–æ—Ç –Ω–µ –Ω–∞–≤—è–∑—á–∏–≤
    </user_experience>

    <technical_quality>
      - –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –ø–∞–¥–µ–Ω–∏–π
      - –û—Ç–≤–µ—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∑–∞ —Ä–∞–∑—É–º–Ω–æ–µ –≤—Ä–µ–º—è (<5 —Å–µ–∫)
      - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ö—Ä–∞–Ω–∏—Ç –∏ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ
      - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
      - Graceful handling –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
    </technical_quality>

    <mvp_readiness>
      - –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ 10-20 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
      - –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç end-to-end
      - –ú–æ–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –¥–ª—è –∏—Ç–µ—Ä–∞—Ü–∏–π
    </mvp_readiness>
  </success_criteria>
</project_specification>
